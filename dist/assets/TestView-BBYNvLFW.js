import{_ as S,c as i,o,a as s,r as q,d as x,u as A,b as B,e as N,f as p,g as V,h as F,n as b,t as a,i as y,F as D,j as R,w as g,S as P,k as u,l as z,m as E,p as M}from"./index-CUoSi8b9.js";const O={};function Q(w,r){return o(),i("button",null,[r[0]||(r[0]=s("div",{class:"ball"},null,-1)),s("p",null,[q(w.$slots,"default",{},void 0)])])}const j=S(O,[["render",Q],["__scopeId","data-v-edaf88b7"]]),L={key:0},U={class:"title"},G={class:"question-container"},H={class:"question-actions"},J={class:"question-actions__buttons"},K={class:"dialog-content"},W={key:0},X={key:1},Y={class:"dialog-actions"},Z={key:1},ee=x({__name:"TestView",setup(w){var T;const r=A("finishInfo"),I=N(),h=F(),d=B();let f=0;const v=((T=I.params.id)==null?void 0:T.toString())??"",t=p({pages:666,currPage:0,question:"",answers:[]}),l=p({finished:!1,level:null,correctCnt:0,correctPct:0}),n=p(-1),$=async()=>{const _=n.value;n.value=-2;let e={};v!=="demo"?e=await d.sendTestAnswer(t.value.currPage,_):(e=await d.loadDemoTestQuestion(t.value.currPage),_===d.demoTestCorrectAnswers[t.value.currPage-1]&&(f+=1)),e!=null&&e.finished?(l.value=e,l.value.correctCnt=f,l.value.correctPct=f/t.value.pages*100,r.value.showModal()):(t.value=e,n.value=-1)};return V(async()=>{v?v!=="demo"?t.value=await d.startTest(v):t.value=await d.loadDemoTestQuestion(0):h.push({name:"home",query:{err:"TEST_NOT_FOUND"}})}),(_,e)=>{var k,C;return t.value.currPage>0?(o(),i("main",L,[s("header",null,[s("div",{class:"header-progress",style:b({width:`${t.value.currPage/t.value.pages*100}%`})},null,4),s("span",U,[s("h2",null,a(t.value.currPage)+" / "+a(t.value.pages),1)]),e[2]||(e[2]=s("p",null,"Из предложенных внизу вариантов выберите верное пропущенное в предложении слово.",-1))]),s("div",G,[s("h1",null,a(t.value.question),1)]),s("div",H,[s("div",J,[(o(!0),i(D,null,R(t.value.answers,(m,c)=>(o(),E(j,{disabled:n.value<-1,class:M(["round",{selected:n.value===c}]),value:"i",onClick:se=>n.value=c},{default:g(()=>[u(a(m),1)]),_:2},1032,["disabled","class","onClick"]))),256))]),y(P,{disabled:n.value<0,onClick:e[0]||(e[0]=m=>$())},{default:g(()=>e[3]||(e[3]=[u(" Далее » ")])),_:1,__:[3]},8,["disabled"])]),s("div",{class:"finish-animation",style:b({height:`${(k=l.value)==null?void 0:k.correctPct}%`||0})},null,4),s("dialog",{class:"finishInfo",ref_key:"finishInfo",ref:r},[s("section",K,[e[8]||(e[8]=s("h2",null,"Тест завершён",-1)),s("div",null,[(C=l.value)!=null&&C.level?(o(),i("h3",W,[e[4]||(e[4]=u(" Предположительный уровень ")),e[5]||(e[5]=s("br",null,null,-1)),e[6]||(e[6]=u("владения языком: ")),s("b",null,a(l.value.level),1)])):(o(),i("h3",X," Поздравляем с прохождением вашего первого теста — вы сделали маленький, но важный шаг в сторону улучшения ваших навыков! ")),e[7]||(e[7]=s("hr",null,null,-1)),u(" Вы верно ответили на "+a(l.value.correctCnt)+" вопросов из "+a(t.value.pages)+". ",1)])]),s("section",Y,[y(P,{onClick:e[1]||(e[1]=m=>{var c;z(h).push("/home"),(c=r.value)==null||c.close()})},{default:g(()=>e[9]||(e[9]=[u(" В главное меню ")])),_:1,__:[9]})])],512)])):(o(),i("main",Z,e[10]||(e[10]=[s("h1",null,"⌛ Загрузка теста…",-1)])))}}}),le=S(ee,[["__scopeId","data-v-f9ae7775"]]);export{le as default};
